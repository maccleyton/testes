
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Editor ProseMirror com LaTeX e Código</title>
  <style>
    body {
      display: flex;
      margin: 0;
      font-family: Arial, sans-serif;
    }
    #sidebar {
      width: 250px;
      padding: 10px;
      background: #f0f0f0;
      border-right: 1px solid #ccc;
    }
    #editor {
      flex: 1;
      padding: 20px;
      min-height: 100vh;
      outline: none;
      font-size: 16px;
    }
    .toolbar button {
      display: block;
      margin-bottom: 10px;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <h3>Barra Lateral</h3>
    <div class="toolbar">
      <button onclick="insertLatex()">Inserir LaTeX</button>
      <button onclick="renderLatex()">Renderizar LaTeX</button>
      <button onclick="insertCode()">Inserir Código</button>
      <button onclick="renderCode()">Renderizar Código</button>
    </div>
    <hr>
    <label>Fonte: <input type="text" id="fontFamily" value="Arial" onchange="updateStyle()"></label><br>
    <label>Tamanho: <input type="number" id="fontSize" value="16" onchange="updateStyle()"> px</label><br>
    <label>Margem: <input type="number" id="marginSize" value="20" onchange="updateStyle()"> px</label><br>
    <label>Espaçamento: <input type="number" id="lineHeight" value="1.5" step="0.1" onchange="updateStyle()"></label><br>
    <label>Orientação:
      <select id="orientation" onchange="updateStyle()">
        <option value="vertical">Vertical</option>
        <option value="horizontal">Horizontal</option>
      </select>
    </label>
  </div>
  <div id="editor" contenteditable="true"></div>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
    function insertLatex() {
      const latex = prompt("Digite o código LaTeX:");
      if (latex) {
        document.execCommand("insertHTML", false, `<div class='latex'>\(${latex}\)</div>`);
      }
    }

    function renderLatex() {
      const selection = window.getSelection();
      if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        const container = document.createElement("div");
        container.innerHTML = range.toString();
        container.className = "latex";
        range.deleteContents();
        range.insertNode(container);
        MathJax.typesetPromise([container]);
      }
    }

    function insertCode() {
      const code = prompt("Digite o código:");
      if (code) {
        document.execCommand("insertHTML", false, `<pre class='code-block'><code>${code}</code></pre>`);
      }
    }

    function renderCode() {
      const selection = window.getSelection();
      if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        const container = document.createElement("pre");
        container.className = "code-block";
        container.innerHTML = `<code>${range.toString()}</code>`;
        range.deleteContents();
        range.insertNode(container);
      }
    }

    function updateStyle() {
      const editor = document.getElementById("editor");
      editor.style.fontFamily = document.getElementById("fontFamily").value;
      editor.style.fontSize = document.getElementById("fontSize").value + "px";
      editor.style.padding = document.getElementById("marginSize").value + "px";
      editor.style.lineHeight = document.getElementById("lineHeight").value;
      const orientation = document.getElementById("orientation").value;
      editor.style.flexDirection = orientation === "horizontal" ? "row" : "column";
    }
  </script>
</body>
</html>
